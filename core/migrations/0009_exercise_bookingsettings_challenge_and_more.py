# Generated by Django 6.0 on 2026-01-24 06:20

import django.db.models.deletion
import django.utils.timezone
from django.conf import settings
from django.db import migrations, models


class Migration(migrations.Migration):

    dependencies = [
        ('core', '0008_memberprofile_phone_number'),
    ]

    operations = [
        migrations.CreateModel(
            name='Exercise',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=100, unique=True)),
                ('category', models.CharField(choices=[('strength', 'Strength Training'), ('cardio', 'Cardio'), ('flexibility', 'Flexibility & Mobility'), ('sports', 'Sports'), ('other', 'Other')], max_length=20)),
                ('measurement_type', models.CharField(choices=[('weight', 'Weight (kg)'), ('reps', 'Repetitions'), ('time', 'Time (seconds)'), ('distance', 'Distance (meters)'), ('calories', 'Calories')], max_length=20)),
                ('description', models.TextField(blank=True)),
                ('instructions', models.TextField(blank=True, help_text='How to perform the exercise')),
                ('muscle_groups', models.JSONField(default=list, help_text='List of muscle groups targeted')),
                ('difficulty_level', models.CharField(choices=[('beginner', 'Beginner'), ('intermediate', 'Intermediate'), ('advanced', 'Advanced')], default='intermediate', max_length=20)),
                ('equipment_required', models.CharField(blank=True, max_length=200)),
                ('video_url', models.URLField(blank=True, help_text='YouTube or instructional video URL')),
                ('image', models.ImageField(blank=True, null=True, upload_to='exercises/')),
                ('is_active', models.BooleanField(default=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
            ],
            options={
                'db_table': 'exercises',
                'ordering': ['category', 'name'],
            },
        ),
        migrations.CreateModel(
            name='BookingSettings',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('allow_member_booking', models.BooleanField(default=True)),
                ('allow_waitlist', models.BooleanField(default=True)),
                ('auto_confirm_bookings', models.BooleanField(default=True)),
                ('allow_cancellation', models.BooleanField(default=True)),
                ('cancellation_fee', models.DecimalField(decimal_places=2, default=0, max_digits=10)),
                ('max_bookings_per_member_per_day', models.IntegerField(default=3)),
                ('max_bookings_per_member_per_week', models.IntegerField(default=10)),
                ('send_booking_confirmation', models.BooleanField(default=True)),
                ('send_reminder_24h_before', models.BooleanField(default=True)),
                ('send_reminder_2h_before', models.BooleanField(default=False)),
                ('send_waitlist_promotion_notification', models.BooleanField(default=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('tenant', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='booking_settings', to='core.tenant')),
            ],
            options={
                'db_table': 'booking_settings',
            },
        ),
        migrations.CreateModel(
            name='Challenge',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('title', models.CharField(max_length=200)),
                ('description', models.TextField()),
                ('challenge_type', models.CharField(choices=[('attendance', 'Attendance Challenge'), ('workout_count', 'Workout Count'), ('specific_exercise', 'Specific Exercise'), ('team', 'Team Challenge')], max_length=50)),
                ('target_value', models.DecimalField(decimal_places=2, help_text='Target to achieve', max_digits=10)),
                ('start_date', models.DateField()),
                ('end_date', models.DateField()),
                ('status', models.CharField(choices=[('upcoming', 'Upcoming'), ('active', 'Active'), ('completed', 'Completed'), ('cancelled', 'Cancelled')], default='upcoming', max_length=20)),
                ('reward_points', models.IntegerField(default=100)),
                ('reward_description', models.TextField(blank=True)),
                ('image', models.ImageField(blank=True, null=True, upload_to='challenges/')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('tenant', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='challenges', to='core.tenant')),
            ],
            options={
                'db_table': 'challenges',
                'ordering': ['-start_date'],
            },
        ),
        migrations.CreateModel(
            name='ChallengeParticipation',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('joined_at', models.DateTimeField(default=django.utils.timezone.now)),
                ('current_progress', models.DecimalField(decimal_places=2, default=0, max_digits=10)),
                ('progress_percentage', models.DecimalField(decimal_places=2, default=0, max_digits=5)),
                ('is_completed', models.BooleanField(default=False)),
                ('completed_at', models.DateTimeField(blank=True, null=True)),
                ('rank', models.IntegerField(blank=True, null=True)),
                ('challenge', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='participations', to='core.challenge')),
                ('member', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='challenge_participations', to='core.memberprofile')),
            ],
            options={
                'db_table': 'challenge_participations',
                'ordering': ['-current_progress'],
                'unique_together': {('challenge', 'member')},
            },
        ),
        migrations.AddField(
            model_name='challenge',
            name='participants',
            field=models.ManyToManyField(related_name='challenges', through='core.ChallengeParticipation', to='core.memberprofile'),
        ),
        migrations.CreateModel(
            name='ClassSchedule',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('class_name', models.CharField(max_length=100)),
                ('class_type', models.CharField(choices=[('yoga', 'Yoga'), ('zumba', 'Zumba'), ('crossfit', 'CrossFit'), ('spinning', 'Spinning'), ('pilates', 'Pilates'), ('hiit', 'HIIT'), ('strength', 'Strength Training'), ('cardio', 'Cardio'), ('martial_arts', 'Martial Arts'), ('other', 'Other')], max_length=50)),
                ('description', models.TextField(blank=True)),
                ('day_of_week', models.IntegerField(choices=[(0, 'Monday'), (1, 'Tuesday'), (2, 'Wednesday'), (3, 'Thursday'), (4, 'Friday'), (5, 'Saturday'), (6, 'Sunday')])),
                ('start_time', models.TimeField()),
                ('end_time', models.TimeField()),
                ('capacity', models.IntegerField(default=20, help_text='Maximum number of participants')),
                ('waitlist_capacity', models.IntegerField(default=5, help_text='Maximum waitlist size')),
                ('booking_opens_days_before', models.IntegerField(default=7, help_text='Days before class when booking opens')),
                ('booking_closes_hours_before', models.IntegerField(default=2, help_text='Hours before class when booking closes')),
                ('cancellation_allowed_hours_before', models.IntegerField(default=4, help_text='Hours before class when cancellation is allowed')),
                ('is_active', models.BooleanField(default=True)),
                ('effective_from', models.DateField(default=django.utils.timezone.now)),
                ('effective_until', models.DateField(blank=True, null=True)),
                ('color_code', models.CharField(default='#6200EA', help_text='Hex color for calendar display', max_length=7)),
                ('image', models.ImageField(blank=True, null=True, upload_to='classes/')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('instructor', models.ForeignKey(limit_choices_to={'role__in': ['trainer', 'tenant_admin']}, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='teaching_classes', to=settings.AUTH_USER_MODEL)),
                ('tenant', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='class_schedules', to='core.tenant')),
            ],
            options={
                'db_table': 'class_schedules',
                'ordering': ['day_of_week', 'start_time'],
            },
        ),
        migrations.CreateModel(
            name='ClassBooking',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('booking_date', models.DateField(help_text='Specific date of the class')),
                ('status', models.CharField(choices=[('confirmed', 'Confirmed'), ('waitlist', 'Waitlist'), ('cancelled', 'Cancelled'), ('attended', 'Attended'), ('no_show', 'No Show')], default='confirmed', max_length=20)),
                ('booked_at', models.DateTimeField(auto_now_add=True)),
                ('cancelled_at', models.DateTimeField(blank=True, null=True)),
                ('cancellation_reason', models.TextField(blank=True)),
                ('checked_in_at', models.DateTimeField(blank=True, null=True)),
                ('waitlist_position', models.IntegerField(blank=True, null=True)),
                ('promoted_from_waitlist_at', models.DateTimeField(blank=True, null=True)),
                ('reminder_sent', models.BooleanField(default=False)),
                ('reminder_sent_at', models.DateTimeField(blank=True, null=True)),
                ('notes', models.TextField(blank=True)),
                ('member', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='class_bookings', to='core.memberprofile')),
                ('class_schedule', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='bookings', to='core.classschedule')),
            ],
            options={
                'db_table': 'class_bookings',
                'ordering': ['-booking_date', 'waitlist_position'],
            },
        ),
        migrations.AddField(
            model_name='challenge',
            name='target_exercise',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='core.exercise'),
        ),
        migrations.CreateModel(
            name='Leaderboard',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('leaderboard_type', models.CharField(choices=[('attendance_month', 'Monthly Attendance'), ('attendance_all_time', 'All-Time Attendance'), ('workouts_month', 'Monthly Workouts'), ('workouts_all_time', 'All-Time Workouts'), ('pbs_month', 'Monthly Personal Bests'), ('pbs_all_time', 'All-Time Personal Bests'), ('points_month', 'Monthly Points'), ('points_all_time', 'All-Time Points')], max_length=50)),
                ('rank', models.IntegerField()),
                ('score', models.DecimalField(decimal_places=2, max_digits=10)),
                ('period_start', models.DateField()),
                ('period_end', models.DateField()),
                ('calculated_at', models.DateTimeField(default=django.utils.timezone.now)),
                ('member', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='leaderboard_entries', to='core.memberprofile')),
                ('tenant', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='leaderboards', to='core.tenant')),
            ],
            options={
                'db_table': 'leaderboards',
                'ordering': ['leaderboard_type', 'rank'],
            },
        ),
        migrations.CreateModel(
            name='MemberEngagementScore',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('overall_score', models.DecimalField(decimal_places=2, help_text='Overall engagement score 0-100', max_digits=5)),
                ('attendance_score', models.DecimalField(decimal_places=2, max_digits=5)),
                ('workout_logging_score', models.DecimalField(decimal_places=2, max_digits=5)),
                ('payment_score', models.DecimalField(decimal_places=2, max_digits=5)),
                ('attendance_rate_30d', models.DecimalField(decimal_places=2, help_text='Percentage', max_digits=5)),
                ('last_visit_days_ago', models.IntegerField()),
                ('current_streak_days', models.IntegerField(default=0)),
                ('longest_streak_days', models.IntegerField(default=0)),
                ('payment_status', models.CharField(choices=[('current', 'Current'), ('due', 'Payment Due'), ('overdue', 'Overdue'), ('suspended', 'Suspended')], max_length=20)),
                ('days_until_payment_due', models.IntegerField(blank=True, null=True)),
                ('churn_risk', models.CharField(choices=[('low', 'Low Risk'), ('medium', 'Medium Risk'), ('high', 'High Risk'), ('critical', 'Critical Risk')], max_length=20)),
                ('churn_probability', models.DecimalField(decimal_places=2, help_text='Percentage 0-100', max_digits=5)),
                ('recommended_actions', models.JSONField(default=list, help_text='List of recommended retention actions')),
                ('calculated_at', models.DateTimeField(default=django.utils.timezone.now)),
                ('member', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='engagement_scores', to='core.memberprofile')),
            ],
            options={
                'db_table': 'member_engagement_scores',
                'ordering': ['-calculated_at'],
            },
        ),
        migrations.CreateModel(
            name='PaymentGateway',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('gateway_type', models.CharField(choices=[('stripe', 'Stripe'), ('razorpay', 'Razorpay'), ('paypal', 'PayPal')], max_length=20)),
                ('api_key', models.CharField(help_text='Public/Publishable Key', max_length=255)),
                ('api_secret', models.CharField(help_text='Secret Key', max_length=255)),
                ('webhook_secret', models.CharField(blank=True, max_length=255)),
                ('is_active', models.BooleanField(default=True)),
                ('is_test_mode', models.BooleanField(default=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('tenant', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='payment_gateways', to='core.tenant')),
            ],
            options={
                'db_table': 'payment_gateways',
            },
        ),
        migrations.CreateModel(
            name='PaymentMethod',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('gateway_customer_id', models.CharField(help_text='Stripe customer ID or Razorpay customer ID', max_length=255)),
                ('gateway_payment_method_id', models.CharField(blank=True, max_length=255)),
                ('payment_type', models.CharField(choices=[('card', 'Credit/Debit Card'), ('upi', 'UPI'), ('netbanking', 'Net Banking'), ('wallet', 'Digital Wallet'), ('cash', 'Cash')], max_length=20)),
                ('card_last4', models.CharField(blank=True, max_length=4)),
                ('card_brand', models.CharField(blank=True, max_length=20)),
                ('card_expiry_month', models.IntegerField(blank=True, null=True)),
                ('card_expiry_year', models.IntegerField(blank=True, null=True)),
                ('is_default', models.BooleanField(default=False)),
                ('is_active', models.BooleanField(default=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('gateway', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='core.paymentgateway')),
                ('member', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='payment_methods', to='core.memberprofile')),
            ],
            options={
                'db_table': 'payment_methods',
                'ordering': ['-is_default', '-created_at'],
            },
        ),
        migrations.CreateModel(
            name='PaymentWebhook',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('event_type', models.CharField(max_length=100)),
                ('event_id', models.CharField(max_length=255, unique=True)),
                ('payload', models.JSONField()),
                ('processed', models.BooleanField(default=False)),
                ('processed_at', models.DateTimeField(blank=True, null=True)),
                ('error_message', models.TextField(blank=True)),
                ('received_at', models.DateTimeField(auto_now_add=True)),
                ('gateway', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='webhooks', to='core.paymentgateway')),
            ],
            options={
                'db_table': 'payment_webhooks',
                'ordering': ['-received_at'],
            },
        ),
        migrations.CreateModel(
            name='PersonalBest',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('best_value', models.DecimalField(decimal_places=2, max_digits=10)),
                ('previous_best', models.DecimalField(blank=True, decimal_places=2, max_digits=10, null=True)),
                ('achieved_date', models.DateField()),
                ('times_improved', models.IntegerField(default=0)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('exercise', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='personal_bests', to='core.exercise')),
                ('member', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='personal_bests', to='core.memberprofile')),
            ],
            options={
                'db_table': 'personal_bests',
                'ordering': ['-achieved_date'],
            },
        ),
        migrations.CreateModel(
            name='PersonalTrainingSession',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('session_date', models.DateField()),
                ('start_time', models.TimeField()),
                ('end_time', models.TimeField()),
                ('session_type', models.CharField(choices=[('assessment', 'Initial Assessment'), ('strength', 'Strength Training'), ('cardio', 'Cardio Training'), ('flexibility', 'Flexibility & Mobility'), ('nutrition', 'Nutrition Consultation'), ('general', 'General Training')], default='general', max_length=50)),
                ('status', models.CharField(choices=[('scheduled', 'Scheduled'), ('confirmed', 'Confirmed'), ('in_progress', 'In Progress'), ('completed', 'Completed'), ('cancelled', 'Cancelled'), ('no_show', 'No Show')], default='scheduled', max_length=20)),
                ('goals', models.TextField(blank=True, help_text='Session goals')),
                ('notes', models.TextField(blank=True, help_text='Trainer notes')),
                ('member_feedback', models.TextField(blank=True, help_text='Member feedback after session')),
                ('rating', models.IntegerField(blank=True, help_text='Member rating 1-5', null=True)),
                ('booked_at', models.DateTimeField(auto_now_add=True)),
                ('confirmed_at', models.DateTimeField(blank=True, null=True)),
                ('completed_at', models.DateTimeField(blank=True, null=True)),
                ('cancelled_at', models.DateTimeField(blank=True, null=True)),
                ('cancellation_reason', models.TextField(blank=True)),
                ('reminder_sent', models.BooleanField(default=False)),
                ('reminder_sent_at', models.DateTimeField(blank=True, null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('member', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='pt_sessions', to='core.memberprofile')),
                ('tenant', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='pt_sessions', to='core.tenant')),
                ('trainer', models.ForeignKey(limit_choices_to={'role__in': ['trainer', 'tenant_admin']}, on_delete=django.db.models.deletion.CASCADE, related_name='pt_sessions', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'db_table': 'personal_training_sessions',
                'ordering': ['-session_date', '-start_time'],
            },
        ),
        migrations.CreateModel(
            name='SubscriptionPayment',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('amount', models.DecimalField(decimal_places=2, max_digits=10)),
                ('currency', models.CharField(default='INR', max_length=3)),
                ('payment_date', models.DateTimeField(default=django.utils.timezone.now)),
                ('payment_method', models.CharField(choices=[('card', 'Credit/Debit Card'), ('upi', 'UPI'), ('netbanking', 'Net Banking'), ('wallet', 'Digital Wallet'), ('cash', 'Cash')], max_length=20)),
                ('transaction_id', models.CharField(blank=True, max_length=255, null=True, unique=True)),
                ('gateway_payment_id', models.CharField(blank=True, max_length=255)),
                ('gateway_order_id', models.CharField(blank=True, max_length=255)),
                ('status', models.CharField(choices=[('pending', 'Pending'), ('processing', 'Processing'), ('completed', 'Completed'), ('failed', 'Failed'), ('refunded', 'Refunded'), ('cancelled', 'Cancelled')], default='pending', max_length=20)),
                ('gateway_response', models.JSONField(blank=True, default=dict)),
                ('retry_count', models.IntegerField(default=0)),
                ('next_retry_date', models.DateTimeField(blank=True, null=True)),
                ('invoice_number', models.CharField(blank=True, max_length=50, null=True, unique=True)),
                ('notes', models.TextField(blank=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('gateway', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='core.paymentgateway')),
                ('member', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='subscription_payments', to='core.memberprofile')),
                ('subscription', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='payments', to='core.subscription')),
            ],
            options={
                'db_table': 'subscription_payments',
                'ordering': ['-payment_date'],
            },
        ),
        migrations.CreateModel(
            name='WorkoutLog',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('value', models.DecimalField(decimal_places=2, help_text='Primary measurement value', max_digits=10)),
                ('sets', models.IntegerField(blank=True, null=True)),
                ('reps', models.IntegerField(blank=True, null=True)),
                ('duration_seconds', models.IntegerField(blank=True, null=True)),
                ('distance_meters', models.DecimalField(blank=True, decimal_places=2, max_digits=10, null=True)),
                ('notes', models.TextField(blank=True)),
                ('difficulty_rating', models.IntegerField(blank=True, help_text='1-5, how hard was it', null=True)),
                ('is_personal_best', models.BooleanField(default=False)),
                ('logged_at', models.DateTimeField(default=django.utils.timezone.now)),
                ('exercise', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='logs', to='core.exercise')),
                ('member', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='workout_logs', to='core.memberprofile')),
            ],
            options={
                'db_table': 'workout_logs',
                'ordering': ['-logged_at'],
            },
        ),
        migrations.CreateModel(
            name='Achievement',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('achievement_type', models.CharField(choices=[('attendance_7_day', '7 Day Streak'), ('attendance_30_day', '30 Day Streak'), ('attendance_100_day', '100 Day Streak'), ('attendance_365_day', '365 Day Streak'), ('first_workout', 'First Workout Logged'), ('workouts_10', '10 Workouts Logged'), ('workouts_50', '50 Workouts Logged'), ('workouts_100', '100 Workouts Logged'), ('first_pb', 'First Personal Best'), ('pb_5', '5 Personal Bests'), ('pb_10', '10 Personal Bests'), ('pb_broken', 'PB Broken'), ('member_1_month', '1 Month Member'), ('member_6_months', '6 Months Member'), ('member_1_year', '1 Year Member'), ('member_2_years', '2 Years Member'), ('referral_1', 'First Referral'), ('referral_5', '5 Referrals'), ('early_bird', 'Early Bird (6 AM Check-in)'), ('night_owl', 'Night Owl (9 PM Check-in)'), ('weekend_warrior', 'Weekend Warrior')], max_length=50)),
                ('title', models.CharField(max_length=100)),
                ('description', models.TextField()),
                ('icon', models.CharField(help_text='Icon identifier (emoji or icon class)', max_length=50)),
                ('earned_at', models.DateTimeField(default=django.utils.timezone.now)),
                ('points', models.IntegerField(default=10)),
                ('member', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='achievements', to='core.memberprofile')),
            ],
            options={
                'db_table': 'achievements',
                'ordering': ['-earned_at'],
                'indexes': [models.Index(fields=['member', 'earned_at'], name='achievement_member__b36b8c_idx')],
                'unique_together': {('member', 'achievement_type')},
            },
        ),
        migrations.AddIndex(
            model_name='classschedule',
            index=models.Index(fields=['tenant', 'is_active'], name='class_sched_tenant__822e7b_idx'),
        ),
        migrations.AddIndex(
            model_name='classschedule',
            index=models.Index(fields=['day_of_week', 'start_time'], name='class_sched_day_of__a3c243_idx'),
        ),
        migrations.AddIndex(
            model_name='classbooking',
            index=models.Index(fields=['member', 'status'], name='class_booki_member__2762f9_idx'),
        ),
        migrations.AddIndex(
            model_name='classbooking',
            index=models.Index(fields=['booking_date', 'status'], name='class_booki_booking_e8a7e9_idx'),
        ),
        migrations.AddIndex(
            model_name='classbooking',
            index=models.Index(fields=['class_schedule', 'booking_date'], name='class_booki_class_s_965abc_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='classbooking',
            unique_together={('class_schedule', 'member', 'booking_date')},
        ),
        migrations.AddIndex(
            model_name='leaderboard',
            index=models.Index(fields=['tenant', 'leaderboard_type', 'period_start'], name='leaderboard_tenant__747a48_idx'),
        ),
        migrations.AddIndex(
            model_name='leaderboard',
            index=models.Index(fields=['member', 'leaderboard_type'], name='leaderboard_member__46224d_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='leaderboard',
            unique_together={('leaderboard_type', 'member', 'period_start', 'period_end')},
        ),
        migrations.AddIndex(
            model_name='memberengagementscore',
            index=models.Index(fields=['member', 'calculated_at'], name='member_enga_member__d7a67b_idx'),
        ),
        migrations.AddIndex(
            model_name='memberengagementscore',
            index=models.Index(fields=['churn_risk'], name='member_enga_churn_r_31a4bd_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='paymentgateway',
            unique_together={('tenant', 'gateway_type')},
        ),
        migrations.AddIndex(
            model_name='paymentwebhook',
            index=models.Index(fields=['event_id'], name='payment_web_event_i_b8f874_idx'),
        ),
        migrations.AddIndex(
            model_name='paymentwebhook',
            index=models.Index(fields=['processed'], name='payment_web_process_d3b66c_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='personalbest',
            unique_together={('member', 'exercise')},
        ),
        migrations.AddIndex(
            model_name='personaltrainingsession',
            index=models.Index(fields=['trainer', 'session_date'], name='personal_tr_trainer_eb60c5_idx'),
        ),
        migrations.AddIndex(
            model_name='personaltrainingsession',
            index=models.Index(fields=['member', 'session_date'], name='personal_tr_member__091864_idx'),
        ),
        migrations.AddIndex(
            model_name='personaltrainingsession',
            index=models.Index(fields=['session_date', 'status'], name='personal_tr_session_f90b3b_idx'),
        ),
        migrations.AddIndex(
            model_name='subscriptionpayment',
            index=models.Index(fields=['member', 'status'], name='subscriptio_member__a7c957_idx'),
        ),
        migrations.AddIndex(
            model_name='subscriptionpayment',
            index=models.Index(fields=['transaction_id'], name='subscriptio_transac_1c4996_idx'),
        ),
        migrations.AddIndex(
            model_name='subscriptionpayment',
            index=models.Index(fields=['payment_date'], name='subscriptio_payment_9349ea_idx'),
        ),
        migrations.AddIndex(
            model_name='workoutlog',
            index=models.Index(fields=['member', 'exercise'], name='workout_log_member__7553fb_idx'),
        ),
        migrations.AddIndex(
            model_name='workoutlog',
            index=models.Index(fields=['logged_at'], name='workout_log_logged__2bf0c3_idx'),
        ),
        migrations.AddIndex(
            model_name='workoutlog',
            index=models.Index(fields=['is_personal_best'], name='workout_log_is_pers_3980b3_idx'),
        ),
    ]
